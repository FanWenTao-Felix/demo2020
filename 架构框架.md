# 系统 架构 框架
## 一、系统
### 1.缓存
#### [缓存系统设计：缓存击穿，缓存雪崩，缓存穿透，缓存预热](https://www.cnblogs.com/fudashi233/p/10706750.html)
```markdown
1.- 缓存击穿:
假设一个缓存系统中存在一个热Key，每分每秒都有大量的请求访问这个key，那么当这个热key因为过期而失效，一瞬间所有的请求直接打到DB上，这种场景称做缓存击穿。
解决方案：
    1.互斥锁
    当缓存过期时，常见的逻辑是直接请求DB，然后再set回缓存中。为了避免缓存击穿的问题，可以在请求DB的地方加一个锁（如果是分布式系统就需要使用分布式锁），
    争取到锁的就去访问DB，没争取到的就阻塞一段时间再请求缓存，减少直接打到DB的请求。
    2.永不过期
    不给key设置有效期，让key永不过期，然后以定时任务的形式，主动去更新缓存。
    3.逻辑过期
    同样不给key设置有效期，而是将expired值作为缓存数据的一个字段放入缓存中，取出来时校验一下是否过期，如果过期了则重新设置有效期，并起一个异步线程去更新这缓存。
2.- 缓存雪崩
假设一个缓存系统中，大量的key用的都是同一个expired值，那么在某一瞬间，这些key可能会集体全部失效，所有的请求直接打到DB上，这种场景称作缓存雪崩。
解决方案：    
    1.随机过期时间
    将数据写入缓存时往往会设置一个expired值，为了避免在某一时间统统全部过期，可以在expired值的基础上加上1~5min的随机值，避免这种情况。这样缓存就不会在某一瞬间突然全部过期了。
3.- 缓存穿透
    当用户访问一个不存在的key时，缓存取不到，按逻辑就是从库里面取，这种请求一多，打到DB的请求也就增加了，这种场景称作缓存击穿。
解决方案：    
    1.缓存不存在的值
    如果查询到一个空的结果时，可以仍然将这个空的结果进行缓存，下次在请求的话就会这就返回这个空的结果而不是请求DB。
    当然，如果这种请求一多，存储里就会存储大量这种无效值，对缓存的空间也是一种压力，所以推荐使用下面BloomFilter的方式。
    2.BloomFilter
    BloomFilter的特性就是当BloomFilter认为有数据时，是可能有，当认为没有数据时，那就是真没有。故可以利用BloomFilter的特性，挡掉这些不存在的请求。
4.- 缓存预热 ：
    系统刚启动，缓存还未完全构建，但是用户不会管这么多，直接一股脑的访问过来，请求又直接打到DB了。
    如果遇到这种场景，可以利用缓存预热的思想，在系统启动时调用一个后台接口，构建一遍缓存。
```
#### [缓存，确实很香，却也很受伤！](https://www.cnblogs.com/niejunlei/p/12914336.html)
```markdown
最开始使用缓存的场景，
    一些数据库里存储的不变的配置信息，服务启动时，直接加载到本地公共模块，方便其它功能模块共享使用。这便是最基本，最简单的本地缓存应用。
1.- 缓存穿透:对于未“命中”的数据，则需要穿过缓存层，进一步去持久化数据层获取。此种情景，我们称之为缓存穿透。
2.- 缓存一致性：当应用发生数据操作变更，我们则需要将变更同时更新到持久层及缓冲层。“先”与“后”的问题，我们也称之为缓存一致性问题。
    如果先更新缓存，则可能面临持久层更新失败，产生缓存脏数据的问题。
    然则，假如先更新持久层，我们又不得不面对从持久层更新成功之后到缓存更新之前这个间期，缓存对外提供旧数据的窘境。
3.- 缓存与更新
    缓存更新一致性的问题，从实际应用情景来讲，可以细分为强一致性需求，弱一致性需求及最终一致性需求。
4.- 缓存穿透的危害
    1、数据暂时不存在于缓存中。
    2、数据从来不存在，当一个查询不存在数据的请求到来，其必然会穿过缓存，达到持久化存储层。
5.- 缓存雪崩    
    如果缓存由于某些原因一时不能提供正常服务时，所有的请求就会穿透到持久存储层，造成存储层极端宕机情况发生。
    1.缓存的高可用是应对缓存雪崩的首要保障：主从，读写分离，动态扩容，一致性均衡，异地容灾等。
    2、服务治理之限流、熔断降级。限流即对异常流量的控制；熔断、降级标的核心服务资源的保护。
```
### 2.系统重构
[系统重构的道与术](https://yq.aliyun.com/articles/739598?utm_content=g_1000094622)

[重构：改善饿了么交易系统的设计思路](https://mp.weixin.qq.com/s?__biz=MzIxMjE5MTE1Nw==&mid=2653200817&idx=2&sn=d632705e7c92f65e912057cb1117cf7b&chksm=8c99d36bbbee5a7d87b7f13bf925035f4e39eb5929d4d6d41787d37b9e53c052ae47ec813024&mpshare=1&scene=23&srcid=&sharer_sharetime=1576630307918&sharer_shareid=d812adcc01829f0f7f8fb06aea118511#rd)
```
个人简单的理解，道就是思想，术是方法。可谓有道无术，术尚可求也；有术无道，止于术。
分别从重构的基本思路和原则，以及常见重构方案的应用来分别讲讲系统重构的“道与术”。
```
![重构工作遵循的基本思路和原则](https://ucc.alicdn.com/pic/developer-ecology/d05cc91a0a104e3da0d29c7958484d5b.png)

![要注意考虑哪些问题](https://ucc.alicdn.com/pic/developer-ecology/7b860b3ea3e74d93820e419895a90e9a.png)
### 3.系统开发流程
[研发模式和流程的再思考](https://www.cnblogs.com/jackyfei/p/12914933.html)
## 架构
### [架构演变之路：为何要搞微服务架构？](https://www.cnblogs.com/arthinking/p/12812786.html)
```markdown
    1.软件架构的发展史  单体->分布式单体->SOA->微服务（MSA）
    2.SOA架构与MSA架构的区别
    3.微服务架构核心关注的问题是什么
    4.如何做微服务架构的技术选型
    5.目前架构正在朝着什么方向发展
    6.架构升级与业务发展的关系，一定要用最前卫的架构技术吗？什么样的架构才是好的架构
    7.微服务的难点是什么，这里主要留给大家思考，会在后续文章中进一步讲解
```
### [架构设计 | 接口幂等性原则，防重复提交Token管理](https://www.cnblogs.com/cicada-smile/p/12939875.html)
```markdown
幂等性概念
    幂等操作的特点是其任意多次执行所产生的影响均与一次执行的影响相同。就是说，一次和多次请求某一个资源会产生同样的作用影响。
```
## 三、框架
### Spring
[关于Spring AOP，除了动态代理、CGLIB，你还知道什么？](https://mp.weixin.qq.com/s?__biz=MzI3NzE0NjcwMg==&mid=2650128800&idx=3&sn=3a3e9806348f3b280bdc5ee725238a20&chksm=f36bdc81c41c5597d0e206d637dd7bd986886212e38ae69fd506cc8488ab98bac5698204e9bc&mpshare=1&scene=23&srcid=&sharer_sharetime=1590070530809&sharer_shareid=d812adcc01829f0f7f8fb06aea118511#rd)

[SpringBoot切面Aop的demo简单讲解](https://www.cnblogs.com/xuwujing/p/12927081.html)

[Spring IOC的核心机制：实例化与注入](https://www.cnblogs.com/zyjimmortalp/p/12828726.html)

[重新认识 Spring IOC](https://www.cnblogs.com/i-code/p/12832545.html)

[spring注入bean的几种策略模式](https://www.cnblogs.com/zyjimmortalp/p/12833761.html)

[Spring中资源的加载原来是这么一回事啊！](https://www.cnblogs.com/i-code/p/12845329.html)

[Spring 循环引用(三)源码深入分析版](https://www.cnblogs.com/burg-xun/p/12865205.html)

[一文读懂Spring中的DI和AOP](cnblogs.com/xiaoyao2011/p/12866456.html)

[谈谈Spring中的BeanPostProcessor接口](https://www.cnblogs.com/tuyang1129/p/12866484.html)
### SpringMVC
[手码两万余字，SpringMVC 包教包会](https://www.cnblogs.com/lenve/p/12100698.html)

[SpringMVC源码学习：容器初始化+MVC初始化+请求分发处理+参数解析+返回值解析+视图解析](https://www.cnblogs.com/summerday152/p/12856338.html)
### SpringBoot
#### [SpringBoot切面Aop的demo简单讲解](https://www.cnblogs.com/xuwujing/p/12927081.html)
```markdown
AOP（Aspect OrientedProgramming）：面向切面编程，面向切面编程（也叫面向方面编程），是目前软件开发中的一个热点，也是Spring框架中的一个重要内容。
利用AOP可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。
* 用途
    日志记录，性能统计，安全控制，权限管理，事务处理，异常处理，资源池管理。
```

[springboot超级详细的日志配置(基于logback)](https://www.cnblogs.com/wuyoucao/p/10983241.html)

[Spring Boot使用MyBatis Generator、Swagger](https://www.cnblogs.com/FireworksEasyCool/p/11133827.html)

[接近8000字的Spring/SpringBoot常用注解总结！安排！](https://www.cnblogs.com/javaguide/p/spring-annotations.html)

[实例讲解Springboot整合MongoDB进行CRUD操作的两种方式](https://www.cnblogs.com/larrydpk/p/12735620.html)

[springboot+dubbo简单分布式RPC调用demo](https://www.cnblogs.com/kuangdw/p/12783281.html)

[Spring Boot 整合 Apache Dubbo](https://www.cnblogs.com/vandusty/p/12853973.html)

[SpringBoot使用拦截器、过滤器、监听器](https://www.cnblogs.com/haixiang/p/12000685.html)

[SpringBoot 整合 Zookeeper 接入Starring微服务平台](https://www.cnblogs.com/laramia/p/11978271.html)

[基于Netty和SpringBoot实现一个轻量级RPC框架-Server篇](https://www.cnblogs.com/throwable/p/12194713.html)

### SpringCloud-Alibaba
[随笔分类 - Spring Cloud Alibaba](https://www.cnblogs.com/fx-blog/category/1569361.html)

[SpringCloud-Alibaba-Nacos 服务注册中心&配置中心](https://www.cnblogs.com/songjilong/p/12796258.html)

[SpringCloud系列之集成Dubbo应用篇](https://www.cnblogs.com/chinaWu/p/12818661.html)

[Java开发架构篇：领域驱动设计架构基于SpringCloud搭建微服务](https://www.cnblogs.com/xiaofuge/p/12938567.html)
### Mybatis
[mybatis源码学习：一级缓存和二级缓存分析](https://www.cnblogs.com/summerday152/p/12773135.html)

#### 1.Mybatis SQL如何执行
[面试官问你MyBatis SQL是如何执行的？把这篇文章甩给他](https://www.cnblogs.com/cxuanBlog/p/12248536.html)
##### Mybatis的特点
```
1.解除SQL与程序代码的耦合，通过提供 DAO层，将业务逻辑和数据访问逻辑分离，使系统的设计更清晰，更易维护，更易单元测试。SQL和代码的分离，提高了可维护性。
2.MyBatis 比较简单和轻量： 只要通过配置 jar 包，或者如果你使用 Maven 项目的话只需要配置 Maven 以来就可以。
3.屏蔽样板代码 MyBatis: 回屏蔽原始的 JDBC 样板代码，让你把更多的精力专注于 SQL 的书写和属性-字段映射上。
4.编写原生 SQL，支持多表关联 MyBatis 最主要的特点就是你可以手动编写 SQL 语句，能够支持多表关联查询。
    提供映射标签，支持对象与数据库的 ORM 字段关系映射
    提供 XML 标签，支持编写动态 SQL。
```
[Mybatis学习总结（一）](https://blog.csdn.net/Marmara01/article/details/88878280)
[mybatis探究之延迟加载和缓存](https://www.cnblogs.com/liyier/p/12516626.html)
[MyBatis缓存机制（一级缓存，二级缓存）](https://www.cnblogs.com/ljl150/p/12918581.html)
[MyBatis 开发手册](https://www.cnblogs.com/ZhuChangwu/p/11734347.html)
[mybatis的插件机制](https://www.cnblogs.com/qm-article/p/11785350.html)
[深入理解Mybatis插件](https://www.cnblogs.com/heartlake/p/12855653.html)
[springboot2 + mybatis 多种方式实现多数据配置](https://www.cnblogs.com/song27/p/12595603.html)
[持久层框架JPA与Mybatis该如何选型](https://www.cnblogs.com/zimug/p/11790285.html)

[Mybatis 强大的结果集映射器resultMap](https://www.cnblogs.com/felordcn/p/12945815.html)
```markdown

```



## 微服务
[微服务、分库分表、分布式事务管理、APM链路跟踪性能分析演示项目](https://www.cnblogs.com/RicCC/p/12105120.html)

[我的微服务之路](https://www.cnblogs.com/xuanbg/p/12079024.html)


